# ìž¥ì†Œ ì •ë³´ ì¶”ì¶œ ë¬¸ì œ - ìµœì¢… ìš”ì•½ ë³´ê³ ì„œ

## ðŸ“Œ Executive Summary

í˜„ìž¬ ìžë™ ì¶”ì¶œ íƒœê·¸ì—ì„œ **ìž¥ì†Œ ì •ë³´(ë„ì‹œ, êµ¬êµ°)ê°€ 90% ì´ìƒ ìž˜ëª» ì¶”ì¶œ**ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒ ì¤‘ìž…ë‹ˆë‹¤.

### ê·¼ë³¸ ì›ì¸ (3ê°€ì§€)

| ìˆœë²ˆ | ì›ì¸ | ì˜í–¥ | í•´ê²° ë‚œì´ë„ |
|------|------|------|-----------|
| 1ï¸âƒ£ | ë°ì´í„°ë² ì´ìŠ¤ ë¶€ì¡± (5ê°œë§Œ ë“±ë¡) | 95% ì‹¤íŒ¨ | ë‚®ìŒ |
| 2ï¸âƒ£ | ì•½ì¹­ ë¯¸ì§€ì› (í™ëŒ€, ë¶„ë‹¹ ë“±) | 50% ì‹¤íŒ¨ | ë‚®ìŒ |
| 3ï¸âƒ£ | Geminiê°€ ìœ„ì¹˜ ì¶”ì¶œ ì•ˆ í•¨ | ì‹ ë¢°ë„ ä½Ž | ë‚®ìŒ |

**ì´ ê°œë°œ ë¹„ìš©:** ì•½ 1-2ì£¼ (3ëª… ê¸°ì¤€ 1ì£¼)

---

## ðŸ”´ í˜„ìž¬ ìƒíƒœ

### ìž…ë ¥ ì˜ˆì‹œ
```
ì‚¬ìš©ìžê°€ "í™ëŒ€ ì¹´íŽ˜" ê²€ìƒ‰
```

### í˜„ìž¬ ê²°ê³¼
```json
{
  "location": {
    "city": "ì „êµ­",
    "district": ""
  },
  "location_confidence": {
    "score": 0.3,
    "level": "medium"
  }
}
```

âŒ **ë¬¸ì œ:**
- "í™ëŒ€"ë¥¼ ì¸ì‹í•˜ì§€ ëª»í•¨ (ì•½ì¹­)
- ë„ì‹œ/êµ¬êµ° ì •ë³´ ì™„ì „ížˆ ë¯¸ê²€ì¶œ
- ì‹ ë¢°ë„ ì ìˆ˜ê°€ ë‚®ìŒ

---

## âœ… ê°œì„  í›„ ê²°ê³¼

### ë™ì¼ ìž…ë ¥
```
ì‚¬ìš©ìžê°€ "í™ëŒ€ ì¹´íŽ˜" ê²€ìƒ‰
```

### ê°œì„ ëœ ê²°ê³¼
```json
{
  "location": {
    "city": "ì„œìš¸",
    "district": "ë§ˆí¬",
    "neighborhoods": ["í™ëŒ€ë™"],
    "canonical_name": "ì„œìš¸ ë§ˆí¬",
    "confidence": {
      "score": 0.85,
      "level": "high"
    }
  },
  "extraction_method": {
    "primary": "alias",
    "notes": "ì•½ì¹­ 'í™ëŒ€'ë¡œ ì •ê·œí™”ë¨"
  }
}
```

âœ… **ê°œì„ :**
- ì•½ì¹­ "í™ëŒ€" ì •ê·œí™” â†’ "ë§ˆí¬"
- ë„ì‹œ, êµ¬êµ°, ë™ ëª¨ë‘ ì¶”ì¶œ
- ì‹ ë¢°ë„ 80% ì´ìƒ

---

## ðŸ“Š ë‹¨ê³„ë³„ ê°œì„  ê³„íš

### Phase 1ï¸âƒ£: ê¸°ë³¸ ë°ì´í„°ë² ì´ìŠ¤ í™•ìž¥ (2-3ì¼)

**ìž‘ì—…:**
- `server/locationDatabase.ts` ìˆ˜ì •
- 5ê°œ ì§€ì—­ â†’ 250+ ì§€ì—­ (ì „êµ­ ëª¨ë“  êµ¬/êµ°)

**íŒŒì¼:**
```
ì„œìš¸ (25ê°œ êµ¬): ê°•ë‚¨, ë§ˆí¬, ì†¡íŒŒ, ì¢…ë¡œ, ...
ë¶€ì‚° (16ê°œ êµ¬): ë¶€ì‚°ì§„, í•´ìš´ëŒ€, ...
ê²½ê¸° (31ê°œ ì‹œêµ°): ì„±ë‚¨, ìˆ˜ì›, ì˜ì •ë¶€, ...
... ë‚˜ë¨¸ì§€ 14ê°œ ì‹œë„
```

**íš¨ê³¼:**
- ì •ê·œ ì§€ëª… ì¸ì‹: 2% â†’ 30%
- í…ŒìŠ¤íŠ¸ í†µê³¼ìœ¨: 15% â†’ 35%

---

### Phase 2ï¸âƒ£: ì•½ì¹­ ì •ê·œí™” ì‹œìŠ¤í…œ (2-3ì¼)

**ìž‘ì—…:**
- `server/aliasNormalizer.ts` ì‹ ê·œ ìƒì„±
- 100+ ì•½ì¹­ ë§¤í•‘ í…Œì´ë¸” ìž‘ì„±

**ì˜ˆì‹œ:**
```typescript
aliasDatabase = [
  {
    aliases: ["í™ëŒ€", "í™ëŒ€ìž…êµ¬", "í™ëŒ€ë™"],
    canonical: { city: "ì„œìš¸", district: "ë§ˆí¬" }
  },
  {
    aliases: ["ë¶„ë‹¹", "ë¶„ë‹¹ì‹ ë„ì‹œ", "íŒêµ"],
    canonical: { city: "ê²½ê¸°", district: "ì„±ë‚¨" }
  },
  // ... 98ê°œ ë”
];
```

**íš¨ê³¼:**
- ì•½ì¹­ ì¸ì‹: 0% â†’ 80%
- í…ŒìŠ¤íŠ¸ í†µê³¼ìœ¨: 35% â†’ 85%

---

### Phase 3ï¸âƒ£: Gemini API ê°•í™” (1-2ì¼)

**ìž‘ì—…:**
- Gemini ë¶„ì„ í”„ë¡¬í”„íŠ¸ ìˆ˜ì •
- ìœ„ì¹˜ ì •ë³´ë„ AIê°€ ì¶”ì¶œí•˜ë„ë¡ ë³€ê²½

**í”„ë¡¬í”„íŠ¸ ê°œì„ :**
```
// ê¸°ì¡´
JSON { category, signature_items, audience, ... }

// ê°œì„ 
JSON {
  "location": {
    "city": "ë„ì‹œëª…",
    "district": "êµ¬/êµ°ëª…",
    "micro_poi": "ë™/ìƒê¶Œ"
  },
  "category": "ì¹´í…Œê³ ë¦¬",
  ...
}
```

**íš¨ê³¼:**
- Geminië„ ìœ„ì¹˜ ì¶”ì¶œ ê°€ëŠ¥
- ì‹ ë¢°ë„: 0.4 â†’ 0.75

---

### Phase 4ï¸âƒ£: ì‹ ë¢°ë„ ì‹œìŠ¤í…œ ê°œì„  (1-2ì¼)

**ìž‘ì—…:**
- `server/locationConfidence.ts` ì‹ ê·œ ìƒì„±
- 7ê°€ì§€ signal ê¸°ë°˜ ì ìˆ˜ ê³„ì‚°

**ì ìˆ˜ ê³„ì‚°:**
```
cityFound (0.0-0.3) +
districtFound (0.0-0.3) +
microPoiFound (0.0-0.2) +
aliasMatch (0.0-0.1) +
bothFieldsConsistent (0.0-0.1) +
bonusPoints - penalties
= ìµœì¢… ì‹ ë¢°ë„ ì ìˆ˜ (0.0-1.0)

High: >= 0.8
Medium: 0.5-0.8
Low: < 0.5
```

**íš¨ê³¼:**
- ì‹ ë¢°ë„ ì •êµí™”
- ì˜¤ë¥˜ ê°ì§€ìœ¨ í–¥ìƒ

---

## ðŸŽ¯ ìµœì¢… ëª©í‘œ

| ì§€í‘œ | í˜„ìž¬ | ëª©í‘œ | ë‹¬ì„±ë„ |
|------|------|------|--------|
| **ì•½ì¹­ ì¸ì‹** | 0ê°œ | 100+ | âˆž |
| **ì§€ì—­ ì»¤ë²„ìœ¨** | 5ê°œ | 250+ | 50ë°° |
| **í…ŒìŠ¤íŠ¸ í†µê³¼ìœ¨** | 15% | 85%+ | 5.7ë°° |
| **í‰ê·  ì‹ ë¢°ë„** | 0.4 | 0.8 | 2ë°° |
| **ê°œë°œ ë¹„ìš©** | - | 1-2ì£¼ | ë‚®ìŒ |

---

## ðŸ“ í•„ìš”í•œ íŒŒì¼ ë³€ê²½ì‚¬í•­

### ì‹ ê·œ íŒŒì¼

```
server/
â”œâ”€ aliasNormalizer.ts      (100-150ì¤„) â† NEW
â”œâ”€ locationConfidence.ts   (80-100ì¤„)  â† NEW
â””â”€ locationDatabase.ts     (ê¸°ì¡´ ëŒ€í­ í™•ìž¥)
```

### ìˆ˜ì • íŒŒì¼

```
server/
â”œâ”€ index.ts                (extractFacets ì—”ë“œí¬ì¸íŠ¸)
â”œâ”€ locationDatabase.ts     (parseAddress ê°œì„ )
â””â”€ index.ts                (ì‘ë‹µ ìŠ¤í‚¤ë§ˆ ìˆ˜ì •)

test/
â””â”€ test-phase-improvements.ts  (í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì¶”ê°€)
```

### ì˜ˆìƒ ì½”ë“œ ë¼ì¸ ìˆ˜

```
ì‹ ê·œ: ~300ì¤„
ìˆ˜ì •: ~200ì¤„
ì´ ì¶”ê°€: ~500ì¤„

ê¸°ì¡´ ì½”ë“œ: ~1000ì¤„ (ë³€ê²½ ì—†ìŒ)
```

---

## ðŸš€ êµ¬í˜„ ìˆœì„œ

```
Week 1:
  â”œâ”€ Day 1-2: Phase 1 - locationDatabase í™•ìž¥
  â”œâ”€ Day 3-4: Phase 2 - aliasNormalizer êµ¬ì¶•
  â””â”€ Day 5-7: Phase 3-4 + í…ŒìŠ¤íŠ¸

Week 2:
  â”œâ”€ Day 1-2: ë²„ê·¸ ìˆ˜ì • ë° ì„±ëŠ¥ ìµœì í™”
  â”œâ”€ Day 3-4: ì „ìˆ˜ í…ŒìŠ¤íŠ¸
  â””â”€ Day 5: ë°°í¬ ë° ëª¨ë‹ˆí„°ë§
```

---

## ðŸ’¡ ì£¼ìš” ê°œì„  ì˜ˆì‹œ

### ì˜ˆì‹œ 1: ì•½ì¹­ ìž…ë ¥

**ìž…ë ¥:**
```
placeInfo: "í™ëŒ€ ì¹´íŽ˜"
description: "í™ëŒ€ìž…êµ¬ì—­ ê°ì„± ìžˆëŠ” ì¹´íŽ˜"
```

**í˜„ìž¬:**
```
âŒ city: "ì „êµ­", district: ""
```

**ê°œì„  í›„:**
```
âœ… city: "ì„œìš¸", district: "ë§ˆí¬", neighborhoods: ["í™ëŒ€ë™"]
```

---

### ì˜ˆì‹œ 2: ë„ì‹œëª… í¬í•¨

**ìž…ë ¥:**
```
placeInfo: "ë¶„ë‹¹ í—¬ìŠ¤ìž¥"
description: "ê²½ê¸°ë„ ì„±ë‚¨ì‹œ ë¶„ë‹¹ ì‹ ë„ì‹œ ê³ ê¸‰ í”¼íŠ¸ë‹ˆìŠ¤"
```

**í˜„ìž¬:**
```
âš ï¸ city: "ê²½ê¸°", district: ""  (êµ¬/êµ° ë¯¸ê²€ì¶œ)
```

**ê°œì„  í›„:**
```
âœ… city: "ê²½ê¸°", district: "ì„±ë‚¨", neighborhoods: ["ë¶„ë‹¹ë™"]
```

---

### ì˜ˆì‹œ 3: ì •í™•í•œ ì§€ëª…

**ìž…ë ¥:**
```
placeInfo: "ê°•ë‚¨ì—­ í•œì‹ë‹¹"
description: "ì„œìš¸ ê°•ë‚¨êµ¬ ê°•ë‚¨ì—­ ê·¼ì²˜ í”„ë¦¬ë¯¸ì—„ í•œì‹"
```

**í˜„ìž¬:**
```
âœ“ city: "ì„œìš¸", district: "ê°•ë‚¨"
âœ“ confidence: "high"
```

**ê°œì„  í›„:**
```
âœ“ city: "ì„œìš¸", district: "ê°•ë‚¨", neighborhoods: ["ê°•ë‚¨ì—­", "ì—­ì‚¼ë™"]
âœ“ confidence: "high"
âœ“ extraction_method: "description_parse + alias"
```

---

## ðŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

### êµ¬í˜„ ì „
- [ ] íŒ€ íšŒì˜ - ìš°ì„ ìˆœìœ„ í™•ì¸
- [ ] ê°œë°œ í™˜ê²½ êµ¬ì„±
- [ ] ê¸°ìˆ  ê²€í† 

### êµ¬í˜„ ì¤‘
- [ ] Phase 1 ì™„ë£Œ ë° í…ŒìŠ¤íŠ¸
- [ ] Phase 2 ì™„ë£Œ ë° í…ŒìŠ¤íŠ¸
- [ ] Phase 3 ì™„ë£Œ ë° í…ŒìŠ¤íŠ¸
- [ ] Phase 4 ì™„ë£Œ ë° í…ŒìŠ¤íŠ¸
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ (ëª¨ë“  ì‹œë‚˜ë¦¬ì˜¤)

### ë°°í¬ ì „
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (<3000ms)
- [ ] ë¶€í•˜ í…ŒìŠ¤íŠ¸
- [ ] ë³´ì•ˆ ê²€í† 

### ë°°í¬ í›„
- [ ] ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
- [ ] ì‚¬ìš©ìž í”¼ë“œë°± ìˆ˜ì§‘
- [ ] ê°œì„  ë°˜ë³µ

---

## ðŸ” ì°¸ê³  ë¬¸ì„œ

- **ìƒì„¸ ë¶„ì„:** `LOCATION_EXTRACTION_ANALYSIS.md`
- **ë¹ ë¥¸ ê°€ì´ë“œ:** `LOCATION_EXTRACTION_QUICK_FIX.md`
- **ë‹¤ì´ì–´ê·¸ëž¨:** `LOCATION_EXTRACTION_DIAGRAMS.md`

---

## ðŸ“ž ë‹¤ìŒ ë‹¨ê³„

### ì§€ê¸ˆ ë°”ë¡œ í•  ì¼
1. ì´ ë³´ê³ ì„œ ê²€í† 
2. íŒ€ íšŒì˜ ì¼ì • ìž¡ê¸°
3. ê°œë°œ ì¼ì • ìˆ˜ë¦½

### 1ì£¼ì¼ ë‚´ì—
1. Phase 1-2 êµ¬í˜„ ì‹œìž‘
2. ì´ˆê¸° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìž‘ì„±
3. ë°ì´í„° ìˆ˜ì§‘ (ì•½ì¹­ 100+ ì•„ì´í…œ)

### 2ì£¼ì¼ ë‚´ì—
1. ëª¨ë“  Phase êµ¬í˜„ ì™„ë£Œ
2. í†µí•© í…ŒìŠ¤íŠ¸
3. ë°°í¬ ì¤€ë¹„

---

**ë³´ê³ ì„œ ìž‘ì„±ì¼:** 2025ë…„ 11ì›” 13ì¼
**ë¶„ì„ê°€:** GitHub Copilot
**ìƒíƒœ:** ì¤€ë¹„ ì™„ë£Œ (ê°œë°œ ëŒ€ê¸°)

